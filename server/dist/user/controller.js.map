{"version":3,"sources":["../../src/user/controller.js"],"names":["updateProfile","req","res","next","user","comparedPassword","body","password","err","good","status","send","userId","_id","newProfile","name","first","firstName","last","lastName","email","phone","UserModel","findByIdAndUpdate","then","sendStatus"],"mappings":";;;;;;;AAAA;;;;eAEe;AACXA,EAAAA,aAAa,EAAE,uBAACC,GAAD,EAAMC,GAAN,EAAWC,IAAX,EAAoB;AAC/BF,IAAAA,GAAG,CAACG,IAAJ,CAASC,gBAAT,CAA0BJ,GAAG,CAACK,IAAJ,CAASC,QAAnC,EAA6C,UAACC,GAAD,EAAMC,IAAN,EAAe;AACxD,UAAID,GAAG,IAAI,CAACC,IAAZ,EAAkB,OAAOP,GAAG,CAACQ,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqBH,GAAG,IAAI,oBAA5B,CAAP;AAClB,UAAMI,MAAM,GAAGX,GAAG,CAACG,IAAJ,CAASS,GAAxB;AACA,UAAMC,UAAU,GAAG;AACfC,QAAAA,IAAI,EAAE;AACFC,UAAAA,KAAK,EAAEf,GAAG,CAACK,IAAJ,CAASW,SADd;AAEFC,UAAAA,IAAI,EAAEjB,GAAG,CAACK,IAAJ,CAASa;AAFb;AADS,OAAnB;AAMA,aAAOL,UAAU,CAACM,KAAlB;AACA,aAAON,UAAU,CAACO,KAAlB;AACA,aAAOP,UAAU,CAACP,QAAlB;;AAEAe,wBAAUC,iBAAV,CAA4BX,MAA5B,EAAoCE,UAApC,EAAgD;AAAC,eAAK;AAAN,OAAhD,EACCU,IADD,CACM;AAAA,eAAMtB,GAAG,CAACuB,UAAJ,CAAe,GAAf,CAAN;AAAA,OADN,WAEOtB,IAFP;AAGH,KAhBD;AAiBH;AAnBU,C","sourcesContent":["import UserModel from './model';\n\nexport default {\n    updateProfile: (req, res, next) => {\n        req.user.comparedPassword(req.body.password, (err, good) => {\n            if (err || !good) return res.status(401).send(err || 'Incorrect Password')\n            const userId = req.user._id;\n            const newProfile = {\n                name: {\n                    first: req.body.firstName, \n                    last: req.body.lastName\n                }\n            };\n            delete newProfile.email;\n            delete newProfile.phone;\n            delete newProfile.password;\n            \n            UserModel.findByIdAndUpdate(userId, newProfile, {new: true})\n            .then(() => res.sendStatus(200))\n            .catch(next)\n        })\n    }\n    \n}\n"],"file":"controller.js"}