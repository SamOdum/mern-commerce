{"version":3,"sources":["../../src/user/controller.js"],"names":["updateProfile","req","res","next","user","comparedPassword","body","password","err","good","status","send","userId","_id","newProfile","name","first","firstName","last","lastName","email","phone","UserModel","findByIdAndUpdate","new","then","sendStatus","catch"],"mappings":";;;;;;AAAA;;;;;;kBAEe;AACXA,mBAAe,uBAACC,GAAD,EAAMC,GAAN,EAAWC,IAAX,EAAoB;AAC/BF,YAAIG,IAAJ,CAASC,gBAAT,CAA0BJ,IAAIK,IAAJ,CAASC,QAAnC,EAA6C,UAACC,GAAD,EAAMC,IAAN,EAAe;AACxD,gBAAID,OAAO,CAACC,IAAZ,EAAkB,OAAOP,IAAIQ,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqBH,OAAO,oBAA5B,CAAP;AAClB,gBAAMI,SAASX,IAAIG,IAAJ,CAASS,GAAxB;AACA,gBAAMC,aAAa;AACfC,sBAAM;AACFC,2BAAOf,IAAIK,IAAJ,CAASW,SADd;AAEFC,0BAAMjB,IAAIK,IAAJ,CAASa;AAFb;AADS,aAAnB;AAMA,mBAAOL,WAAWM,KAAlB;AACA,mBAAON,WAAWO,KAAlB;AACA,mBAAOP,WAAWP,QAAlB;;AAEAe,4BAAUC,iBAAV,CAA4BX,MAA5B,EAAoCE,UAApC,EAAgD,EAACU,KAAK,IAAN,EAAhD,EACCC,IADD,CACM;AAAA,uBAAMvB,IAAIwB,UAAJ,CAAe,GAAf,CAAN;AAAA,aADN,EAECC,KAFD,CAEOxB,IAFP;AAGH,SAhBD;AAiBH;;AAnBU,C","file":"controller.js","sourcesContent":["import UserModel from './model';\n\nexport default {\n    updateProfile: (req, res, next) => {\n        req.user.comparedPassword(req.body.password, (err, good) => {\n            if (err || !good) return res.status(401).send(err || 'Incorrect Password')\n            const userId = req.user._id;\n            const newProfile = {\n                name: {\n                    first: req.body.firstName, \n                    last: req.body.lastName\n                }\n            };\n            delete newProfile.email;\n            delete newProfile.phone;\n            delete newProfile.password;\n            \n            UserModel.findByIdAndUpdate(userId, newProfile, {new: true})\n            .then(() => res.sendStatus(200))\n            .catch(next)\n        })\n    }\n    \n}\n"]}